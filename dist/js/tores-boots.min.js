// Tores-Boots JS Framework

document.addEventListener('DOMContentLoaded', function() {
  'use strict';
  
  // Initialize tooltips
  var tooltips = document.querySelectorAll('[data-toggle="tooltip"]');
  Array.prototype.forEach.call(tooltips, function(tooltip) {
    new bootstrap.Tooltip(tooltip);
  });
  
  // Initialize popovers
  var popovers = document.querySelectorAll('[data-toggle="popover"]');
  Array.prototype.forEach.call(popovers, function(popover) {
    new bootstrap.Popover(popover);
  });
  
  // Initialize toasts
  var toasts = document.querySelectorAll('.toast');
  Array.prototype.forEach.call(toasts, function(toast) {
    new bootstrap.Toast(toast);
  });
  
  // Collapse functionality
  var collapseTriggers = document.querySelectorAll('[data-toggle="collapse"]');
  Array.prototype.forEach.call(collapseTriggers, function(trigger) {
    trigger.addEventListener('click', function(e) {
      e.preventDefault();
      var target = trigger.getAttribute('href') || trigger.getAttribute('data-target');
      var collapseElement = document.querySelector(target);
      collapseElement.classList.toggle('show');
    });
  });
  
  // Dropdown functionality
  var dropdownToggles = document.querySelectorAll('.dropdown-toggle');
  Array.prototype.forEach.call(dropdownToggles, function(toggle) {
    toggle.addEventListener('click', function(e) {
      e.preventDefault();
      toggle.parentElement.classList.toggle('show');
    });
  });
  
  // Close dropdowns when clicking outside
  window.addEventListener('click', function(e) {
    if (!e.target.matches('.dropdown-toggle')) {
      var dropdowns = document.querySelectorAll('.dropdown');
      Array.prototype.forEach.call(dropdowns, function(dropdown) {
        dropdown.classList.remove('show');
      });
    }
  });
  
  // Modal functionality
  var modals = document.querySelectorAll('.modal');
  Array.prototype.forEach.call(modals, function(modal) {
    modal.addEventListener('show.bs.modal', function(e) {
      var target = e.relatedTarget.getAttribute('data-target') || e.relatedTarget.getAttribute('href');
      var modalElement = document.querySelector(target);
      modalElement.classList.add('show');
    });
    
    modal.addEventListener('hide.bs.modal', function(e) {
      modal.classList.remove('show');
    });
  });
  
  // Modal dismiss buttons
  var modalDismissButtons = document.querySelectorAll('[data-dismiss="modal"]');
  Array.prototype.forEach.call(modalDismissButtons, function(button) {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      var modal = button.closest('.modal');
      modal.classList.remove('show');
    });
  });
  
  // Carousel functionality
  var carousels = document.querySelectorAll('.carousel');
  Array.prototype.forEach.call(carousels, function(carousel) {
    new bootstrap.Carousel(carousel);
  });
});